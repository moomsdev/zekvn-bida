(()=>{"use strict";var t={n:e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},d:(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{init:()=>O,metadata:()=>F,name:()=>L,settings:()=>H});var a={};t.r(a),t.d(a,{init:()=>Q,metadata:()=>K,name:()=>q,settings:()=>X});var o={};t.r(o),t.d(o,{ctaButton:()=>e,ctaButtons:()=>a});const r=window.wp.domReady;var n=t.n(r);const l=window.popupMaker.i18n,i=window.wp.element,s=((0,i.forwardRef)(({icon:t,size:e=24,...a},o)=>(0,i.cloneElement)(t,{width:e,height:e,...a,ref:o})),window.wp.primitives),h=window.ReactJSXRuntime,c=(s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.Circle,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,(0,h.jsx)(s.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)(s.Path,{d:"M8 12.5h8V11H8v1.5Z M19 6.5H5a2 2 0 0 0-2 2V15a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a2 2 0 0 0-2-2ZM5 8h14a.5.5 0 0 1 .5.5V15a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V8.5A.5.5 0 0 1 5 8Z"})})),p=(s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,(0,h.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(s.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})})),u=(0,h.jsx)(s.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)(s.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),S=(s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,(0,h.jsx)(s.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)(s.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})})),d=(s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.Path,s.Circle,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.G,s.Path,s.Path,s.SVG,s.G,s.Path,s.Path,s.SVG,s.G,s.Path,s.Path,s.SVG,s.G,s.Path,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,(0,h.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(s.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})})),P=(s.SVG,s.Path,(0,h.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(s.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})})),V=(s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,(0,h.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(s.Path,{d:"M17.031 4.703 15.576 4l-1.56 3H14v.03l-2.324 4.47H9.5V13h1.396l-1.502 2.889h-.95a3.694 3.694 0 0 1 0-7.389H10V7H8.444a5.194 5.194 0 1 0 0 10.389h.17L7.5 19.53l1.416.719L15.049 8.5h.507a3.694 3.694 0 0 1 0 7.39H14v1.5h1.556a5.194 5.194 0 0 0 .273-10.383l1.202-2.304Z"})})),G=(s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.Path,s.SVG,s.Path,(0,h.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(s.Path,{fillRule:"evenodd",d:"M6.863 13.644L5 13.25h-.5a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5H5L18 6.5h2V16h-2l-3.854-.815.026.008a3.75 3.75 0 01-7.31-1.549zm1.477.313a2.251 2.251 0 004.356.921l-4.356-.921zm-2.84-3.28L18.157 8h.343v6.5h-.343L5.5 11.823v-1.146z",clipRule:"evenodd"})})),m=(s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.Path,s.SVG,s.Path,s.Path,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,(0,h.jsxs)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,h.jsx)(s.Path,{d:"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z"}),(0,h.jsx)(s.Path,{d:"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z"})]})),x=(s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.Path,s.SVG,s.Path,s.Path,s.Path,s.SVG,s.Path,s.Path,s.SVG,s.Path,s.Path,s.SVG,s.Path,s.Path,s.SVG,s.Path,s.Path,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,s.SVG,s.Path,window.wp.blocks);function w(t){if(!t)return;const{metadata:e,settings:a,name:o}=t;return(0,x.registerBlockType)({name:o,...e},a)}function g(t){var e,a,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t)if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(a=g(t[e]))&&(o&&(o+=" "),o+=a)}else for(a in t)t[a]&&(o&&(o+=" "),o+=a);return o}const k=function(){for(var t,e,a=0,o="",r=arguments.length;a<r;a++)(t=arguments[a])&&(e=g(t))&&(o&&(o+=" "),o+=e);return o},b=window.React,_=window.wp.blockEditor,f=window.wp.htmlEntities,y=window.wp.components,v=window.wp.data,C=window.wp.editor,j=window.wp.compose,B=window.wp.keycodes,T=window.popupMaker.components,A=window.popupMaker.coreData,M=window.popupMaker.ctaEditor;function z(t,e,a){if(!t)return;const o=[];if(["popup-maker/cta-button"].includes(e)&&a&&o.push("id","bindings"),!o.length)return;const r=Object.entries(t).reduce((t,[e,r])=>o.includes(e)?(t[e]="bindings"===e&&a?a(r):r,t):t,{});return Object.keys(r).length?r:void 0}function N(t){return t.toString().replace(/<\/?a[^>]*>/g,"")}window.wp.blob,window.wp.coreData;const I="_blank",D="nofollow",E=(0,M.withModal)(M.Editor);function R({selectedWidth:t,setAttributes:e}){const a=(0,j.useViewportMatch)("medium","<")?{}:{popoverProps:{placement:"left-start",offset:259}};return(0,h.jsx)(y.__experimentalToolsPanel,{label:(0,l.__)("Settings","default"),resetAll:()=>e({width:void 0}),dropdownMenuProps:a,children:(0,h.jsx)(y.__experimentalToolsPanelItem,{label:(0,l.__)("Button width","default"),isShownByDefault:!0,hasValue:()=>!!t,onDeselect:()=>e({width:void 0}),as:"div",__nextHasNoMarginBottom:!0,children:(0,h.jsx)(y.__experimentalToggleGroupControl,{label:(0,l.__)("Button width","default"),value:t,onChange:t=>e({width:Number(t)}),isBlock:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,children:[25,50,75,100].map(t=>(0,h.jsx)(y.__experimentalToggleGroupControlOption,{value:t,label:`${t}%`},t))})})})}const F=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"popup-maker/cta-button","title":"Call to Action Button","category":"popup-maker","parent":["popup-maker/cta-buttons","core/buttons"],"description":"Prompt visitors to take action with a button-style link.","keywords":["link","button","call to action","cta","conversion"],"textdomain":"popup-maker","attributes":{"tagName":{"type":"string","enum":["a","button"],"default":"a"},"type":{"type":"string","default":"button"},"textAlign":{"type":"string"},"url":{"type":"string","source":"attribute","selector":"a","attribute":"href","role":"content"},"title":{"type":"string","source":"attribute","selector":"a,button","attribute":"title","role":"content"},"text":{"type":"rich-text","source":"rich-text","selector":"a,button","role":"content"},"linkTarget":{"type":"string","source":"attribute","selector":"a","attribute":"target","role":"content"},"rel":{"type":"string","source":"attribute","selector":"a","attribute":"rel","role":"content"},"placeholder":{"type":"string"},"backgroundColor":{"type":"string"},"textColor":{"type":"string"},"gradient":{"type":"string"},"width":{"type":"number"},"ctaId":{"type":"number"}},"supports":{"anchor":true,"splitting":true,"align":false,"alignWide":false,"color":{"__experimentalSkipSerialization":true,"gradients":true,"__experimentalDefaultControls":{"background":true,"text":true}},"typography":{"__experimentalSkipSerialization":["fontSize","lineHeight","fontFamily","fontWeight","fontStyle","textTransform","textDecoration","letterSpacing"],"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalWritingMode":true,"__experimentalDefaultControls":{"fontSize":true}},"reusable":false,"shadow":{"__experimentalSkipSerialization":true},"spacing":{"__experimentalSkipSerialization":true,"padding":["horizontal","vertical"],"__experimentalDefaultControls":{"padding":true}},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true,"__experimentalSkipSerialization":true,"__experimentalDefaultControls":{"color":true,"radius":true,"style":true,"width":true}},"__experimentalSelector":".wp-block-popup-maker-cta-button .wp-block-popup-maker-cta-button__link","interactivity":{"clientNavigation":true}},"styles":[{"name":"fill","label":"Fill","isDefault":true},{"name":"outline","label":"Outline"}],"editorStyle":"popup-maker-block-library","style":"popup-maker-block-library-style","selectors":{"root":".wp-block-popup-maker-cta-button .wp-block-popup-maker-cta-button__link","typography":{"writingMode":".wp-block-popup-maker-cta-button"}}}'),{name:L}=F,H={icon:c,example:{attributes:{className:"is-style-fill",text:(0,l.__)("Call to Action","popup-maker")}},edit:function(t){const{attributes:e,setAttributes:a,className:o,isSelected:r,onReplace:n,mergeBlocks:s,clientId:c,context:w}=t,{tagName:g,textAlign:M,linkTarget:z,placeholder:F,rel:L,style:H,text:O,url:$,width:W,metadata:Z,ctaId:U}=e,J=g||"a",[K,q]=(0,i.useState)(!1),[X,Q]=(0,i.useState)(!1),Y=r&&(K||!!U),[tt,et]=(0,i.useState)(null),at=(0,i.useRef)(null),ot=(0,i.useRef)(null),rt=(0,_.useBlockProps)({ref:(0,j.useMergeRefs)([et,at]),onKeyDown:function(t){B.isKeyboardEvent.primary(t,"k")?(t.preventDefault(),wt()):B.isKeyboardEvent.primaryShift(t,"k")&&(gt(),ot.current?.focus())}}),nt=(0,_.__experimentalUseBorderProps)(e),lt=(0,_.__experimentalUseColorProps)(e),it=(0,_.__experimentalGetSpacingClassesAndStyles)(e),st=(0,_.__experimentalGetShadowClassesAndStyles)(e),ht=(0,_.useBlockEditingMode)(),ct=z===I,pt=!!L?.includes(D),ut="a"===J,St=(0,v.useSelect)(t=>U?t(A.callToActionStore).getCallToAction(U):void 0,[U]),{currentPostId:dt,currentPostType:Pt}=(0,v.useSelect)(t=>({currentPostId:t(C.store).getCurrentPostId(),currentPostType:t(C.store).getCurrentPostType()}),[]),Vt=window.popupMakerBlockLibrary?.homeUrl||"/",Gt=(0,b.useCallback)((t,e=!1)=>{const a=new URLSearchParams;return a.set("cta",t),"popup"===Pt&&dt&&a.set("pid",dt.toString()),e&&a.set("notrack","1"),`${Vt.replace(/\/$/,"")}/?${a.toString()}`},[dt,Pt,Vt]),{createCallToAction:mt,changeEditorId:xt}=(0,v.useDispatch)(A.callToActionStore);function wt(){q(!0)}function gt(){a({ctaId:void 0,url:void 0,linkTarget:void 0,rel:void 0}),q(!1)}(0,i.useEffect)(()=>{r||q(!1)},[r]),(0,i.useEffect)(()=>{if(U)if(St){const t=Gt(St.uuid);a({url:t,linkTarget:St.settings.opensInNewTab?I:void 0,rel:St.settings.nofollow?D:void 0})}else a({url:void 0,linkTarget:void 0,rel:void 0})},[U,St,Pt,dt,Vt,a,Gt]);const kt=function(t){const{replaceBlocks:e,selectionChange:a}=(0,v.useDispatch)(_.store),o=(0,v.useSelect)(t=>t(_.store).getBlock,[]),r=(0,v.useSelect)(t=>t(_.store).getBlockRootClientId,[]),n=(0,v.useSelect)(t=>t(_.store).getBlockIndex,[]),l=(0,i.useRef)(t);return l.current=t,(0,j.useRefEffect)(t=>{function i(t){if(t.defaultPrevented||t.keyCode!==B.ENTER)return;const{content:i,clientId:s}=l.current;if(i.length)return;t.preventDefault();const h=o(r(s)),c=n(s),p=(0,x.cloneBlock)({...h,innerBlocks:h.innerBlocks.slice(0,c)}),u=(0,x.createBlock)((0,x.getDefaultBlockName)()||""),S=h.innerBlocks.slice(c+1),d=S.length?[(0,x.cloneBlock)({...h,innerBlocks:S})]:[];e(h.clientId,[p,u,...d],1),a(u.clientId)}return t.addEventListener("keydown",i),()=>{t.removeEventListener("keydown",i)}},[])}({content:O,clientId:c}),bt=(0,j.useMergeRefs)([kt,ot]),[_t,ft]=(0,i.useState)(!1),yt=ut&&r&&(!!U||K)&&!!tt,[vt,Ct]=(0,i.useState)(0);(0,i.useEffect)(()=>{!async function(){if(!1!==X){if(!0===X){const t=await mt({title:(0,l.__)("New call to action","popup-maker"),status:"publish"});t?(xt(t.id),Q(t.id),q(!0)):Q(!1)}else"number"==typeof X&&X>0&&q(!0);Ct(t=>t+1)}}()},[X,mt,xt]);const[jt,Bt]=(0,_.useSettings)("typography.fluid","layout"),Tt=(0,_.getTypographyClassesAndStyles)(e,{typography:{fluid:jt},layout:{wideSize:Bt?.wideSize}}),At=(0,v.useSelect)(t=>{const e=t(A.callToActionStore),a=U?e.getFetchError(U)||null:e.getFetchError()||null;return null===a?null:a.replace("Invalid post ID.",(0,l.__)("Call to action not found.","popup-maker"))},[U]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{...rt,className:k(rt.className,{[`has-custom-width wp-block-popup-maker-cta-button__width-${W}`]:W,"has-custom-font-size":rt.style.fontSize}),style:{...rt.style,border:At?"2px solid red":void 0},children:(0,h.jsx)(_.RichText,{ref:bt,"aria-label":(0,l.__)("Button text","default"),placeholder:F||(0,l.__)("Add text…","default"),value:O,onChange:t=>a({text:N(t)}),withoutInteractiveFormatting:!0,className:k(o,"wp-block-popup-maker-cta-button__link",lt.className,nt.className,Tt.className,{[`has-text-align-${M}`]:M,"no-border-radius":0===H?.border?.radius,"has-custom-font-size":rt.style.fontSize}),style:{...nt.style,...lt.style,...it.style,...st.style,...Tt.style,writingMode:void 0},onReplace:n,onMerge:s,identifier:"text"})}),(0,h.jsxs)(_.BlockControls,{group:"block",children:["default"===ht&&(0,h.jsx)(_.AlignmentControl,{value:M,onChange:t=>{a({textAlign:t})}}),!St&&ut&&(0,h.jsx)(y.ToolbarButton,{icon:G,title:(0,l.__)("Add Call to Action","popup-maker"),shortcut:B.displayShortcut.primary("k"),onClick:t=>{t.preventDefault(),wt()}}),St&&ut&&(0,h.jsx)(y.ToolbarButton,{icon:V,title:(0,l.__)("Remove Call to Action","popup-maker"),shortcut:B.displayShortcut.primaryShift("k"),onClick:gt,isActive:!0})]}),yt&&(0,h.jsx)(y.Popover,{placement:"bottom",onClose:()=>{q(!1),ot.current?.focus?.()},anchor:tt,focusOnMount:!!Y&&"firstElement",__unstableSlotName:"__unstable-block-tools-after",shift:!0,className:"block-editor-link-control",children:(0,h.jsxs)("div",{style:{width:"300px",padding:"10px"},children:[At&&(0,h.jsx)("div",{className:"pum-cta-error-notice",children:(0,h.jsx)(y.Notice,{status:"error",isDismissible:!1,children:At})}),K||At?(0,h.jsx)(y.Flex,{direction:"column",children:(0,h.jsxs)(y.Flex,{align:"center",justify:"space-between",children:[(0,h.jsx)(y.FlexItem,{style:{flexGrow:1},children:(0,h.jsx)(T.CallToActionSelectControl,{value:U&&!At?U:0,onChange:async t=>{"create_new"!==t?(a({ctaId:Number(t)}),q(!1)):Q(!0)},hideLabelFromVision:!0,placeholder:(0,l.__)("Search or create CTA…","popup-maker"),multiple:!1,extraOptions:[{value:"create_new",label:(0,l.__)("+ Create new CTA","popup-maker")}]})}),(0,h.jsx)(y.FlexItem,{children:(0,h.jsx)(y.Button,{icon:p,label:(0,l.__)("Save","popup-maker"),onClick:()=>q(!1)})})]})}):St&&(0,h.jsxs)(y.Flex,{direction:"column",gap:3,children:[(0,h.jsxs)(y.Flex,{justify:"space-between",align:"center",children:[(0,h.jsx)("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1e1e1e",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:(0,f.decodeEntities)(St?.title?.rendered),children:(0,f.decodeEntities)(St?.title?.rendered)}),(0,h.jsx)(y.Button,{icon:V,variant:"link",size:"small",style:{textDecoration:"none"},isDestructive:!0,onClick:gt,label:(0,l.__)("Remove","popup-maker")})]}),(0,h.jsxs)(y.Flex,{justify:"space-between",align:"center",style:{color:"#1e1e1e"},children:[(0,h.jsxs)("div",{style:{fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",padding:"2px 8px",borderRadius:"12px",fontWeight:"500",flexGrow:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["ID: ",St?.id]}),(0,h.jsx)(y.Button,{icon:P,variant:"tertiary",style:{borderRadius:"6px",textDecoration:"none",color:"#1e1e1e",padding:".25rem 0.75rem",flexGrow:1},href:Gt(St.uuid,!0),target:"_blank",rel:"noopener noreferrer",showTooltip:!0,label:(0,l.__)("Preview Call To Action","popup-maker"),children:(0,l.__)("Preview","popup-maker")}),(0,h.jsx)(y.Button,{icon:d,variant:"tertiary",style:{borderRadius:"6px",textDecoration:"none",color:"#1e1e1e",padding:".25rem 0.75rem",flexGrow:1},href:`edit.php?post_type=popup&page=popup-maker-call-to-actions&edit=${St.id}`,target:"_blank",label:(0,l.__)("Edit Call to Action","popup-maker"),showTooltip:!0,children:(0,l.__)("Edit","popup-maker")})]}),(0,h.jsxs)(y.Button,{icon:m,variant:"secondary",onClick:()=>ft(!_t),style:{width:"100%",justifyContent:"space-between",border:"1px solid #ddd",borderRadius:"6px",padding:"8px 12px"},showTooltip:!0,label:(0,l.__)("Advanced Options","popup-maker"),children:[(0,l.__)("Advanced Options","popup-maker"),(0,h.jsx)(y.Icon,{icon:_t?S:u})]}),_t&&(0,h.jsxs)(y.Flex,{direction:"column",gap:3,children:[(0,h.jsx)(y.ToggleControl,{label:(0,l.__)("Open in new window","popup-maker"),checked:ct,onChange:t=>{a({linkTarget:t?I:void 0})},__nextHasNoMarginBottom:!0}),(0,h.jsx)(y.ToggleControl,{label:(0,l.__)('Add rel="nofollow"',"popup-maker"),checked:pt,onChange:t=>{a({rel:t?D:void 0})},__nextHasNoMarginBottom:!0})]})]})]})}),(0,h.jsx)(_.InspectorControls,{group:"settings",children:(0,h.jsx)(y.Panel,{header:(0,l.__)("CTA Settings","popup-maker"),children:(0,h.jsx)(y.PanelBody,{children:(0,h.jsx)(T.CallToActionSelectControl,{label:(0,l.__)("Choose a Call to Action","popup-maker"),value:U,placeholder:(0,l.__)("Search or create CTA…","popup-maker"),onChange:async t=>{"create_new"!==t?(a({ctaId:Number(t)}),q(!1)):Q(!0)},extraOptions:[{value:"create_new",label:(0,l.__)("+ Create new CTA","popup-maker")}]})})})}),(0,h.jsx)(_.InspectorControls,{children:(0,h.jsx)(R,{selectedWidth:W,setAttributes:a})}),(0,h.jsx)(_.InspectorControls,{group:"advanced",children:ut&&(0,h.jsx)(y.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,l.__)("Link rel","default"),value:L||"",onChange:t=>a({rel:t})})}),"number"==typeof X&&X>0&&(0,h.jsx)(E,{id:X,defaultValues:{status:"publish"},onSave:t=>{a({ctaId:t.id})},closeOnSave:!0,onClose:()=>{Q(!1)}},X)]})},save:function({attributes:t,className:e}){const{tagName:a,type:o,textAlign:r,fontSize:n,linkTarget:l,rel:i,style:s,text:c,title:p,url:u,width:S}=t,d=a||"a",P="button"===d,V=o||"button",G=(0,_.__experimentalGetBorderClassesAndStyles)(t),m=(0,_.__experimentalGetColorClassesAndStyles)(t),x=(0,_.__experimentalGetSpacingClassesAndStyles)(t),w=(0,_.__experimentalGetShadowClassesAndStyles)(t),g=(0,_.getTypographyClassesAndStyles)(t),b=k("pum-cta","wp-block-popup-maker-cta-button__link","wp-element-button",m.className,G.className,g.className,{[`has-text-align-${r}`]:r,"no-border-radius":0===s?.border?.radius,"has-custom-font-size":n||s?.typography?.fontSize}),f={...G.style,...m.style,...x.style,...w.style,...g.style,writingMode:void 0},y=k(e,{[`has-custom-width wp-block-popup-maker-cta-button__width-${S}`]:Boolean(S)});return(0,h.jsx)("div",{..._.useBlockProps.save({className:y}),children:(0,h.jsx)(_.RichText.Content,{tagName:d,type:P?V:null,className:b,href:P?null:u,title:p,style:f,value:c,target:P?null:l,rel:P?null:i})})},deprecated:[],merge:(t,{text:e=""})=>({...t,text:(t.text||"")+e})},O=()=>w({name:L,metadata:F,settings:H}),$=window.popupMaker.icons,W=window.wp.hooks,Z=(t,e)=>(Z.body||(Z.body=t.implementation.createHTMLDocument("").body),Z.body.innerHTML=e,Z.body),U={from:[{type:"block",isMultiBlock:!0,blocks:["popup-maker/cta-button","core/button"],transform:t=>(0,x.createBlock)("popup-maker/cta-buttons",{},t.map((t,e)=>"core/button"===e?(0,x.createBlock)("core/button",t):(0,x.createBlock)("popup-maker/cta-button",t)))},{type:"block",isMultiBlock:!0,blocks:["core/buttons"],transform:t=>(0,x.createBlock)("popup-maker/cta-buttons",{},t.map(t=>(0,x.createBlock)("core/button",t)))},{type:"block",isMultiBlock:!0,blocks:["core/paragraph"],transform:t=>(0,x.createBlock)("popup-maker/cta-buttons",{},t.map(t=>{const{content:e,metadata:a}=t,o=Z(document,e),r=o.innerText||"",n=o.querySelector("a"),l=n?.getAttribute("href");return(0,x.createBlock)("popup-maker/cta-button",{text:r,url:l,metadata:z(a,"popup-maker/cta-button",({content:t})=>({text:t}))})})),isMatch:t=>t.every(t=>{const e=Z(document,t.content),a=e.innerText||"",o=e.querySelectorAll("a");return a.length<=30&&o.length<=1})}]},J={name:"popup-maker/cta-button",attributesToCopy:["backgroundColor","border","className","fontFamily","fontSize","gradient","style","textColor","width"]},K=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"popup-maker/cta-buttons","title":"Call to Action Buttons","category":"popup-maker","allowedBlocks":["popup-maker/cta-button","core/button"],"description":"Prompt visitors to take action with a group of button-style links.","keywords":["link","button","call to action","cta","conversion"],"textdomain":"popup-maker","attributes":{},"supports":{"anchor":true,"align":["wide","full"],"html":false,"__experimentalExposeControlsToChildren":true,"color":{"gradients":true,"text":false,"__experimentalDefaultControls":{"background":true}},"spacing":{"blockGap":["horizontal","vertical"],"padding":true,"margin":["top","bottom"],"__experimentalDefaultControls":{"padding":true,"blockGap":true}},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontFamily":true,"__experimentalFontWeight":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalDefaultControls":{"fontSize":true}},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true,"__experimentalDefaultControls":{"color":true,"radius":true,"style":true,"width":true}},"layout":{"allowSwitching":false,"allowInheriting":false,"default":{"type":"flex"}},"interactivity":{"clientNavigation":true}},"editorStyle":"popup-maker-block-library","style":"popup-maker-block-library-style"}'),{name:q}=K,X={icon:$.Mark,example:{attributes:{layout:{type:"flex",justifyContent:"center"}},innerBlocks:[{name:"popup-maker/cta-button",attributes:{text:(0,l.__)("Buy now","popup-maker")}},{name:"popup-maker/cta-button",attributes:{text:(0,l.__)("Contact us","popup-maker")}}]},deprecated:[],transforms:U,edit:function({attributes:t,className:e}){var a;const{fontSize:o,layout:r,style:n}=t,l=(0,_.useBlockProps)({className:k(e,{"has-custom-font-size":o||n?.typography?.fontSize})}),{hasButtonVariations:i}=(0,v.useSelect)(t=>({hasButtonVariations:t(x.store).getBlockVariations("popup-maker/cta-button","inserter").length>0}),[]),s=(0,_.useInnerBlocksProps)(l,{defaultBlock:J,directInsert:!i,template:[["popup-maker/cta-button"]],templateInsertUpdatesSelection:!0,orientation:null!==(a=r?.orientation)&&void 0!==a?a:"horizontal"});return(0,h.jsx)("div",{...s})},save:function({attributes:t,className:e}){const{fontSize:a,style:o}=t,r=_.useBlockProps.save({className:k(e,{"has-custom-font-size":a||o?.typography?.fontSize})}),n=_.useInnerBlocksProps.save(r);return(0,h.jsx)("div",{...n})}},Q=()=>w({name:q,metadata:K,settings:X});(0,W.addFilter)("blocks.registerBlockType","popup-maker/cta-buttons",t=>{const{name:e}=t;switch(e){case"core/button":return{...t,parent:[...t.parent,"popup-maker/cta-buttons"]};case"core/buttons":return{...t,allowedBlocks:[...t.allowedBlocks,"popup-maker/cta-button"]};default:return t}}),n()(()=>{Object.values(o).forEach(({init:t})=>{t()})}),(window.popupMaker=window.popupMaker||{}).blockLibrary={}})();